@model RestaurantQRSystem.Models.Order
@{
    Layout = null; // Bu view için layout kullanma
}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sipariş Fişi - #@Model.Id</title>
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css" />
    <style>
        body {
            font-family: 'Courier New', Courier, monospace; /* Fiş görünümü için */
            font-size: 10pt;
            margin: 0;
            padding: 10px;
            width: 280px; /* Tipik fiş genişliği, ayarlayabilirsiniz */
            background-color: #fff; /* Arka planı beyaz yap */
        }
        .header {
            text-align: center;
            margin-bottom: 10px;
            border-bottom: 1px dashed #000;
            padding-bottom: 5px;
        }
        .header h4 {
            margin: 0;
            font-size: 12pt;
        }
        .header p {
            margin: 2px 0;
            font-size: 9pt;
        }
        .info p {
            margin: 2px 0;
            font-size: 9pt;
        }
        .info {
             margin-bottom: 10px;
             border-bottom: 1px dashed #000;
             padding-bottom: 5px;
        }
        .items table {
            width: 100%;
            font-size: 9pt;
            border-collapse: collapse;
        }
        .items th, .items td {
            padding: 2px 0;
            vertical-align: top;
        }
        .items thead th {
            border-bottom: 1px solid #000;
            text-align: left;
        }
        .items .qty { text-align: center; width: 40px; }
        .items .price { text-align: right; width: 70px; }
        .total {
            margin-top: 10px;
            padding-top: 5px;
            border-top: 1px solid #000;
            font-weight: bold;
        }
        .note {
            margin-top: 10px;
            font-size: 9pt;
            border-top: 1px dashed #000;
            padding-top: 5px;
        }

        @@media print {
            body {
                -webkit-print-color-adjust: exact;
                width: auto; /* Yazdırırken genişliği otomatik ayarla */
                margin: 0;
                padding: 0;
            }
            /* Yazdırmada sayfa kenar boşluklarını sıfırlamaya çalış */
            @@page {
                margin: 5mm;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h4>RESTAURANT ADI</h4> @* Burayı kendi bilgilerinizle güncelleyin *@
        <p>Adres Bilgisi</p>
        <p>Telefon Numarası</p>
    </div>

    <div class="info">
        <p>Sipariş No: #@Model.Id</p>
        <p>Tarih: @Model.OrderDate.ToString("dd.MM.yy HH:mm")</p>
        <p>Masa: @Model.Table.Name (@Model.Table.Id)</p>
        <p>Müşteri: @(string.IsNullOrEmpty(Model.CustomerName) ? "Misafir" : Model.CustomerName)</p>
    </div>

    <div class="items">
        <table>
            <thead>
                <tr>
                    <th>Ürün</th>
                    <th class="qty">Adet</th>
                    <th class="price">Tutar</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.OrderItems)
                {
                    <tr>
                        <td>@item.Product.Name</td>
                        <td class="qty">@item.Quantity</td>
                        <td class="price">@((item.UnitPrice * item.Quantity).ToString("0.00"))</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="total">
        <table style="width:100%;">
            <tr>
                <td style="text-align:right;">TOPLAM:</td>
                <td style="text-align:right; width: 70px;">@Model.TotalAmount.ToString("0.00") ₺</td>
            </tr>
        </table>
    </div>

    @if (!string.IsNullOrEmpty(Model.CustomerNote))
    {
        <div class="note">
            <strong>Not:</strong> @Model.CustomerNote
        </div>
    }

    <script type="text/javascript">
        // Sayfa yüklendiğinde otomatik olarak yazdırma penceresini aç
        window.onload = function() {
            window.print();
            // Tarayıcıya bağlı olarak, yazdırma sonrası pencereyi kapatmayı deneyebilir.
            // setTimeout(function() { window.close(); }, 100); 
        }
    </script>
</body>
</html> 